{
    "build": {
        "builder": "Nixpacks",
        "phases": {
            "setup": {
                "nixPkgs": [
                    "php84",
                    "php84Extensions.intl",
                    "php84Extensions.zip",
                    "php84Extensions.mbstring",
                    "php84Extensions.pdo_mysql",
                    "php84Packages.composer",
                    "nodejs_18",
                    "npm-9_x"
                ]
            },
            "install": {
                "cmds": ["composer install --ignore-platform-reqs", "npm ci"]
            },
            "build": {
                "cmds": [
                    "composer install --optimize-autoloader --no-interaction",
                    "npm run build"
                ]
            }
        },
        "start": {
            "cmd": "php artisan migrate --force && php artisan optimize && php artisan serve --host=0.0.0.0 --port=$PORT"
        }
    }
}
